"use strict";angular.module("profileviewerApp",["ngCookies","ngResource","ngRoute"]).config(["$compileProvider","$routeProvider",function(a,b){a.aHrefSanitizationWhitelist(/^\s*(https?|file|tel|bitcoin|skype|mailto|callto|bitmsg):/),b.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/:username",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("profileviewerApp").factory("Utils",[function(){var a={};return a.hasProp=function(a){for(var b=[].slice.call(arguments,1);a&&b.length;)a=a[b.shift()];return b.length?null:a},a.getProp=function(a){for(var b=[].slice.call(arguments,1);a&&b.length;)a=a[b.shift()];return b.length?null:a},a}]),angular.module("profileviewerApp").factory("Person",["$http","Utils",function(a,b){var c={},d=b.hasProp;return c.findByUsername=function(b,c,e){var f="http://onenameapi.herokuapp.com/users/"+b;a({method:"GET",url:f}).success(function(b){d(b,"graph","url")?a({method:"GET",url:b.graph.url}).success(function(a){b.graph=a,c(b)}).error(function(a){console.log(a)}):(b.graph={},c(b))}).error(function(a){e(a)})},c}]),angular.module("profileviewerApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("profileviewerApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("profileviewerApp").controller("ProfileCtrl",["$scope","$routeParams","Utils","Person",function(a,b,c,d){a.user={};var e=c.hasProp,f=c.getProp;a.loadAvatar=function(a,b){var c=new Image;c.onload=function(){if(document.getElementById(b).appendChild(c),c.height<c.width){c.style.height="100%",c.style.width="auto";var a=200,d=-(a/c.height*c.width-a)/2;c.style.marginLeft=d.toString()+"px"}},c.src=a},a.loadBackground=function(a,b){var c=new Image;c.onload=function(){var a=document.getElementById(b);a.style.backgroundImage="url("+c.src+")",a.style.backgroundSize="cover",a.style.webkitBackgroundSize="cover",a.style.mozBackgroundSize="cover"},c.src=a},d.findByUsername(b.username,function(c){var d=[],g=[],h=[],i=[],j=null,k=null,l=null,m=null,n=null,o=0,p=null,q=null;if(e(c,"twitter","username")&&e(c,"twitter","proof","url")&&(j={type:"twitter",iconClass:"fa-twitter",username:c.twitter.username,url:"https://twitter.com/"+c.twitter.username,proofUrl:c.twitter.proof.url},d.push(j)),e(c,"facebook","username")&&e(c,"facebook","proof","url")&&(j={type:"facebook",iconClass:"fa-facebook",username:c.facebook.username,url:"https://facebook.com/"+c.facebook.username,proofUrl:c.facebook.proof.url},d.push(j)),e(c,"github","username")&&e(c,"github","proof","url")&&(j={type:"github",iconClass:"fa-github",username:c.github.username,url:"https://github.com/"+c.github.username,proofUrl:c.github.proof.url},d.push(j)),e(c,"bitcoin","address")?g.push({type:"bitcoin",identifier:c.bitcoin.address}):e(c,"bitcoin")&&g.push({type:"bitcoin",identifier:c.bitcoin}),e(c,"graph","followees")){var r=c.graph.followees,s=0,t=4;o=Object.keys(r).length;for(var u in r){var v=r[u],w=null;if(e(v,"avatar_url")&&(w=f(v,"avatar_url")),w){var x={username:u,avatarUrl:w};if(h.push(x),a.loadAvatar(x.avatarUrl,"friend-avatar-"+s),s+=1,o-=1,s>=t)break}}}e(c,"pgp","fingerprint")&&(m=c.pgp.fingerprint,m=m.slice(m.length-16,m.length).match(/.{1,4}/g).join(" ")),e(c,"avatar","url")?k=c.avatar.url:e(c,"avatar")&&(k=c.avatar),e(c,"cover","url")?l=c.cover.url:e(c,"cover")&&(l=c.cover),e(c,"name","formatted")?p=c.name.formatted:e(c,"name")&&(p=c.name),e(c,"location","formatted")?q=c.location.formatted:e(c,"location")&&(q=c.location),a.user={username:b.username,name:p,avatarUrl:k,backgroundUrl:l,location:q,bio:c.bio,featuredFriends:h,unfeaturedFriendCount:o,shortPgpFingerprint:m,shortOtrFingerprint:n,profiles:d,websites:i,payments:g},a.loadAvatar(a.user.avatarUrl,"user-avatar-container"),a.loadBackground(a.user.backgroundUrl,"profile-bottom")}),a.sampleUser={username:"ryanshea",name:"Ryan Shea",contactMethods:[{type:"email",identifier:"ryan@shea.io",iconClass:"fa-envelope-o",url:"#"},{type:"phone",identifier:"5515563914",iconClass:"fa-mobile-phone",url:"#"},{type:"skype",identifier:"ryaneshea",iconClass:"fa-skype",url:"skype:ryaneshea"},{type:"bitmessage",identifier:"BM-2cSqtKVx27J8FZunKqjcsbfKQAhbgWnLdg",url:"bitmsg:BM-2cSqtKVx27J8FZunKqjcsbfKQAhbgWnLdg"}],avatarUrl:"https://s3.amazonaws.com/97p/tux.jpg",backgroundUrl:"https://s3.amazonaws.com/dx3/ryanshea",location:"New York, NY",bio:"Co-founder of OneName with @Muneeb. Bitcoin, identity, the blockchain, and decentralization.",featuredFriends:[{username:"muneeb",avatarUrl:"https://s3.amazonaws.com/kd4/muneeb"},{username:"albertwenger",avatarUrl:"https://pbs.twimg.com/profile_images/1773890030/aew_artistic_bigger.gif"},{username:"naval",avatarUrl:"https://pbs.twimg.com/profile_images/3696617328/667874c5936764d93d56ccc76a2bcc13.jpeg"},{username:"arianna",avatarUrl:"https://s3.amazonaws.com/97p/ariannas-profile.jpg"}],unfeaturedFriendCount:24,shortPgpFingerprint:"A93E A312",shortOtrFingerprint:"756C E84F",profiles:[{type:"twitter",iconClass:"fa-twitter",username:"ryaneshea",url:"https://twitter.com/ryaneshea",proofUrl:"https://twitter.com/ryaneshea/status/486057647808868352"},{type:"facebook",iconClass:"fa-facebook",username:"ryaneshea",url:"https://facebook.com/ryaneshea",proofUrl:"https://facebook.com/ryaneshea/posts/10152385985597713"},{type:"github",iconClass:"fa-github",username:"rxl",url:"https://github.com/rxl",proofUrl:"https://gist.github.com/rxl/9799732"},{type:"linkedin",iconClass:"fa-linkedin",username:"ryaneshea",url:"https://www.linkedin.com/in/ryaneshea",proofUrl:"https://www.linkedin.com"},{type:"instagram",iconClass:"fa-instagram",username:"ryaneshea",url:"http://instagram.com/ryaneshea",proofUrl:"http://instagram.com/ryaneshea"},{type:"reddit",iconClass:"fa-reddit",username:"ryaneshea",url:"http://www.reddit.com/user/ryaneshea/",proofUrl:"http://www.reddit.com/user/ryaneshea/"},{type:"hackernews",iconClass:"fa-hacker-news",username:"rxl",url:"https://news.ycombinator.com/user?id=rxl",proofUrl:"https://news.ycombinator.com/user?id=rxl"},{type:"stackoverflow",iconClass:"fa-stack-overflow",username:"/users/1530754/ryan",url:"http://stackoverflow.com/users/1530754/ryan",proofUrl:"http://stackoverflow.com/users/1530754/ryan"},{type:"angellist",iconClass:"fa-angellist",username:"ryanshea",url:"https://angel.co/ryanshea",proofUrl:"https://angel.co/ryanshea"},{type:"googleplus",iconClass:"fa-google-plus",username:"Ryan Shea",url:"https://plus.google.com/110166845166458482181/posts",proofUrl:"https://plus.google.com/110166845166458482181/posts"}],websites:[{type:"website dark-gradient",iconClass:"fa-link",username:"shea.io",url:"http://shea.io",proofUrl:"http://shea.io/.well-known/openname.txt"},{type:"website dark-gradient",iconClass:"fa-link",username:"onename.io",url:"https://onename.io",proofUrl:"https://onename.io/.well-known/openname.txt"}]}}]);